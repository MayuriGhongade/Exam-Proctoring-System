<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Organization Registration</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
   
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <h5>Register Institution</h5>
    <div class="banner" id="banner">
        <div class="banner-content">
            <p> Please fill out the form below to register your organization. <strong>Create/Use a strong password with at least 6 characters, including at least 3 digits and one symbol</strong>.</p>

        </div>
        <div class="close-button-banner" onclick="closeBanner()"><b>Close X</b></div>
    </div>

    <form id="registrationForm">
        <label for="orgName">Name of Organization:</label><br>
        <input type="text" id="orgName" name="orgName" required><br><br>
        <label for="orgEmail">Organization Email:</label><br>
        <input type="email" id="orgEmail" name="orgEmail" required><br><br>
        <label for="orgPassword">Set Password:</label><br>
        <div style="position: relative;">
            <input type="password" id="orgPassword" name="orgPassword" required>
            <span onclick="togglePassword()" id="togglePassword">
                Show password
            </span>
        </div>
        <br><br>
        <button type="button" id="registerButton">Register <i class="fa fa-university" aria-hidden="true"></i>
        </button>
    </form>
    <script src="js/script.js" defer></script>
    <script>
        function registerOrganization() {
            
            const orgName = document.getElementById("orgName").value;
            const orgEmail = document.getElementById("orgEmail").value;
            const orgPassword = document.getElementById("orgPassword").value;

            
            const data = {
                name: orgName,
                email: orgEmail,
                password: orgPassword,
                password2: orgPassword,  
                tc: "True"
            };

            // Make POST request
            fetch("http://127.0.0.1:8000/api/register/", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json; charset=UTF-8",
                    // "Access-Control-Allow-Origin": "*",
                },
                body: JSON.stringify(data),
            })
            .then(response => response.json())
            .then(data => {
                console.log("Registration successful:", data);
            })
            .catch(error => {
                console.error("Registration failed:", error);
            });
        }
        const bt = document.getElementById('registerButton')
        bt.addEventListener('click', function() {
         registerOrganization()
        });
    </script>
</body>
</html>
